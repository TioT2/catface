; Codegeneration 'test' file
; in CF compilation results, EX - RSP, FX is currently a RBP analog.

; prelude (setup stack and call main)
mgs
pop fx
mgs
pop ex
call main
halt

; Main function
main:
    ; save base pointer
    push fx

    ; ex -= 16
    push ex - 16
    pop ex

    ; fx = ex
    push ex
    pop fx

    ; do stuff here
    ; ........
    ; ........
    ; ........

    ; ex += 16
    push ex + 16
    pop ex
    ; fx = old fx
    pop fx
ret

; codegen_example.cfasm
