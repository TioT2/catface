; Codegeneration 'test' file
; in CF compilation results, EX register is considered to be RSP analog, FX - RBP analog.

; prelude (setup stack and call main)
mgs
pop ex
mgs
pop fx
call main
halt

; Main function
main:
    ; save previous base pointer
    push ex-4
    pop  ex
    push fx
    pop  [ex]

    pop 
ret

; codegen_example.cfasm
